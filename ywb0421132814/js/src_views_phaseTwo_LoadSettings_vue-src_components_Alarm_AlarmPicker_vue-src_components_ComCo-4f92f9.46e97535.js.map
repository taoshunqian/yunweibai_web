{"version":3,"file":"js/src_views_phaseTwo_LoadSettings_vue-src_components_Alarm_AlarmPicker_vue-src_components_ComCo-4f92f9.46e97535.js","mappings":"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","sources":["webpack://yunweibao_ad/./src/views/phaseTwo/LoadSettings.vue","webpack://yunweibao_ad/./src/views/phaseTwo/LoadSettings.vue?fe67","webpack://yunweibao_ad/./src/views/phaseTwo/LoadSettings.vue?fafd","webpack://yunweibao_ad/./src/views/phaseTwo/LoadSettings.vue?ad10","webpack://yunweibao_ad/./src/views/phaseTwo/LoadSettings.vue?b9e3"],"sourcesContent":["<template>\r\n  <TabHeaders :navTitle=\"navTitle\" :leftArrow=\"false\" />\r\n  <!-- <VanImage\r\n    height=\"220\"\r\n    src=\"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg\"\r\n  /> -->\r\n  <div style=\"display:none;\">\r\n    <ComConfig\r\n      :loadCmdInfo=\"loadCmdInfo\"\r\n      :status=\"status\"\r\n      :cmdCmdInfo=\"cmdCmdInfo\"\r\n      @comConfirm=\"comConfirm\"\r\n      \r\n    />\r\n  </div>\r\n\r\n  <CellGroup inset class=\"cell-group\">\r\n    <Cell :title=\"$t('LoadSettings.template[0]')\" is-link \r\n    :value=\"coloumsMode[loadCmdInfo[1]]\" @click=\"showPickerFn(1)\"> </Cell>\r\n  </CellGroup>\r\n\r\n  <CellGroup inset class=\"cell-group\">\r\n    <Field\r\n      type=\"tel\"\r\n      :label=\"$t('LoadSettings.template[1]')\"\r\n      label-width=\"120\"\r\n      :placeholder=\"$t('LoadSettings.templatePlaceholder[0]')\"\r\n      input-align=\"right\"\r\n      readonly\r\n      v-model=\"loadCmdInfo[2]\"\r\n    >\r\n      <template #button>\r\n        <span>MV</span>\r\n      </template></Field\r\n    >\r\n  </CellGroup>\r\n\r\n  <CellGroup inset class=\"cell-group\">\r\n    <Field\r\n      type=\"tel\"\r\n      :label=\"$t('LoadSettings.template[2]')\"\r\n      label-width=\"120\"\r\n      :placeholder=\"$t('LoadSettings.templatePlaceholder[1]')\"\r\n      input-align=\"right\"\r\n      readonly\r\n      v-model=\"loadCmdInfo[3]\"\r\n    >\r\n      <template #button>\r\n        <span>KG</span>\r\n      </template>\r\n    </Field>\r\n  </CellGroup>\r\n\r\n  <!-- 标定数目 -->\r\n  <div style=\"margin-top: 20px; background: #ffffff\">\r\n    <Row>\r\n      <Col span=\"16\">\r\n        <CellGroup>\r\n          <Field\r\n            type=\"tel\"\r\n            :label=\"$t('LoadSettings.template[3]')\"\r\n            label-width=\"120\"\r\n            :placeholder=\"$t('LoadSettings.templatePlaceholder[2]')\"\r\n            input-align=\"right\"\r\n            v-model=\"loadCmdInfo[4]\"\r\n            readonly\r\n          />\r\n        </CellGroup>\r\n      </Col>\r\n      <Col span=\"8\">\r\n        <Button\r\n          type=\"danger\"\r\n          size=\"small\"\r\n          style=\"margin-right: 10px; margin-top: 6px; float: right\"\r\n          @click=\"deleteCalibrationInfoFn\"\r\n          >{{ $t('LoadSettings.template[4]') }}</Button\r\n        >\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          style=\"float: right; margin-top: 6px; margin-right: 10px\"\r\n          @click=\"addCalibrationInfoFn\"\r\n          >{{ $t('LoadSettings.template[5]') }}</Button\r\n        >\r\n      </Col>\r\n    </Row>\r\n  </div>\r\n\r\n  <Row>\r\n    <Col offset=\"1\" span=\"22\">\r\n      <CellGroup\r\n        style=\"margin-top: 10px\"\r\n        v-for=\"(item, index) in addCalibrationInfo\"\r\n        :key=\"index\"\r\n      >\r\n        <Cell>\r\n          <template #title>\r\n            <Checkbox shape=\"square\" v-model=\"item.check\"\r\n              >{{ $t('LoadSettings.template[6]') }} {{ index + 1 }}</Checkbox\r\n            >\r\n          </template>\r\n        </Cell>\r\n        <Field\r\n          type=\"tel\"\r\n          :label=\"$t('LoadSettings.template[7]')\"\r\n          label-width=\"120\"\r\n          :placeholder=\"$t('LoadSettings.templatePlaceholder[3]')\"\r\n          input-align=\"right\"\r\n          v-model=\"item.value1\"\r\n        >\r\n          <template #button>\r\n            <span>MV</span>\r\n          </template>\r\n        </Field>\r\n        <Field\r\n          type=\"tel\"\r\n          :label=\"$t('LoadSettings.template[8]')\"\r\n          label-width=\"120\"\r\n          :placeholder=\"$t('LoadSettings.templatePlaceholder[4]')\"\r\n          input-align=\"right\"\r\n          v-model=\"item.value2\"\r\n        >\r\n          <template #button>\r\n            <span>KG</span>\r\n          </template>\r\n        </Field>\r\n      </CellGroup>\r\n    </Col>\r\n  </Row>\r\n\r\n  <Popup round v-model:show=\"showPicker\" position=\"bottom\">\r\n    <AlarmPicker\r\n      :columns=\"columns\"\r\n      :showPicker=\"showPicker\"\r\n      :defaultIndex=\"defaultIndex\"\r\n      @confirm=\"onConfirm\"\r\n      @cancel=\"showPicker = false\"\r\n    />\r\n  </Popup>\r\n\r\n  <footer style=\"padding-bottom: 50px\"></footer>\r\n  <StickyBottom @BottomSubmit=\"BottomSubmit\" />\r\n</template>\r\n\r\n\r\n<script setup>\r\n/*\r\n报警器 和 刷卡器 共用\r\n*/\r\nimport ComConfig from \"@/components/ComConfig.vue\";\r\nimport AlarmPicker from \"@/components/Alarm//AlarmPicker.vue\";\r\nimport {\r\n  Col,\r\n  Row,\r\n  Cell,\r\n  Field,\r\n  CellGroup,\r\n  Button,\r\n  Checkbox,\r\n  Toast,\r\n  Popup,\r\n  // Image as VanImage,\r\n} from \"vant\"; // Checkbox\r\nimport { keepDecimal } from \"@/utlis/QueryStr\";\r\nimport { defineComponent, ref, onMounted } from \"vue\";\r\n\r\nimport mixins from '@/mixins/index.js'\r\nlet {  t, postAN, TabHeaders,StickyBottom,callJSResult_Status }= mixins();\r\n\r\nconst showPicker = ref(false);\r\nconst columns = ref([]);\r\nconst defaultIndex = ref(0);\r\n\r\nconst navTitle = ref(t('LoadSettings.navTitle'));\r\nconst resultAll = ref(\"\");\r\nconst maxNum = ref(0);\r\nconst comAllCmdInfo = ref([]);\r\nconst cmdCmdInfo = ref([]);\r\nconst loadCmdInfo = ref([]);\r\nconst coloumsMode = ref([]);\r\nconst addCalibrationInfo = ref([]);\r\nconst status = ref(true); // 状态更新\r\nconst isSend = ref(false); // 是否允许设置参数\r\n// 命名空间\r\ndefineComponent({\r\n  name: \"yunweibao-LoadSettings\",\r\n});\r\n\r\n// 弹出 picker 选择器\r\nconst showPickerFn = (num) => {\r\n  showPicker.value = true;\r\n  switch (num) {\r\n    case 1: // 协议类型\r\n      columns.value = coloumsMode.value;\r\n      defaultIndex.value = loadCmdInfo.value[1];\r\n      break;\r\n  }\r\n};\r\n\r\n// picker 弹出层确认\r\nconst onConfirm = (items) => {\r\n  loadCmdInfo.value[1] = items[1];\r\n  showPicker.value = false;\r\n};\r\n\r\nconst BottomSubmit = () => {\r\n  var arr = [...addCalibrationInfo.value];\r\n  var str = \"\";\r\n  arr.forEach((item) => {\r\n    str += \",\" + item.value1 + \",\" + item.value2;\r\n  });\r\n  str = \"$WEGIHTCAL\" + str;\r\n  postAN.ANsendSetting(str); // 载重列表\r\n  status.value = !status.value;\r\n  isSend.value = true;\r\n};\r\n\r\nconst comConfirm = (items) => {\r\n  if (isSend.value) {\r\n    var comInfo = [...comAllCmdInfo.value];\r\n    var index = items.item[0];\r\n    comInfo[index - 1] = items.item;\r\n    comInfo.forEach((item) => {\r\n      var send = \"$UARTSET,\" + item.toString();\r\n      console.log(send);\r\n      postAN.ANsendSetting(send); // 串口信息设置\r\n    });\r\n    var send2 = \"$PREWEIGHT,\" + loadCmdInfo.value[1];\r\n    postAN.ANsendSetting(send2); // 设置传感器\r\n  }\r\n};\r\n\r\nconst deleteCalibrationInfoFn = () => {\r\n  var arr = addCalibrationInfo.value;\r\n  arr.filter((value, index, arr) => {\r\n    if (value.check) {\r\n      arr.splice(index,1);\r\n    }\r\n  });\r\n  loadCmdInfo.value[4] = arr.length;\r\n};\r\n\r\nconst addCalibrationInfoFn = () => {\r\n  var arr = addCalibrationInfo.value;\r\n  loadCmdInfo.value[4] = +loadCmdInfo.value[4] + 1; // 标定数目\r\n  if (arr.length == 15) {\r\n    Toast.fail(t('LoadSettings.fail[0]'));\r\n    return false;\r\n  }\r\n  arr.push({\r\n    check: false,\r\n    value1: \"1\",\r\n    value2: \"1\",\r\n  });\r\n};\r\n\r\n// 解析串口数据\r\nconst getComInfo = (comCmd) => {\r\n  var comArr = [];\r\n  comCmd.forEach((item) => {\r\n    if (item.indexOf(\"52\") !== -1) {\r\n      var its = item.split(\"~\");\r\n      its[1] = its[0];\r\n      its[0] = \"52\";\r\n      cmdCmdInfo.value = its;\r\n    }\r\n    var it = item.split(\"~\");\r\n    it[1] = it[1].split(\"*\")[0];\r\n    comArr.push(it);\r\n  });\r\n  return comArr;\r\n};\r\n\r\nfunction getNewArray(array, subGroupLength) {\r\n  let index = 0;\r\n  let newArray = [];\r\n  while (index < array.length) {\r\n    newArray.push(array.slice(index, (index += subGroupLength)));\r\n  }\r\n  return newArray;\r\n}\r\n// 标定数目 解析数据\r\nconst encodeCalibrationInfo = (calibrationCmd) => {\r\n  var arr = addCalibrationInfo.value;\r\n  if (calibrationCmd.length > 0) {\r\n    var res = getNewArray(calibrationCmd, 2);\r\n    res.forEach((item) => {\r\n      arr.push({\r\n        check: false,\r\n        value1: keepDecimal(item[0], 2),\r\n        value2: keepDecimal(item[1], 2),\r\n      });\r\n    });\r\n  }\r\n};\r\n\r\nconst filterModel = (data) => {\r\n  var arr = []\r\n  for(var i=0;i<data.length;i++) {\r\n    if(data[i] == \"wegihtWithUart\") {\r\n      arr.push(t('LoadSettings.model'));\r\n    } else {\r\n      arr.push(data[i]);\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\n// -------------------------------------------------------------------\r\n// 安卓回调函数r\r\nconst callJSResult = (str) => {\r\n  var cmds = str.split(\";\")[0];\r\n  maxNum.value++;\r\n  resultAll.value += cmds + \"!\";\r\n  if (maxNum.value == 3) {\r\n    var allcmd = resultAll.value.split(\"!\");\r\n    var comCmd = allcmd[0].split(\",\").splice(1); // 串口指令\r\n    var loadCmd = allcmd[1].split(\",\").splice(1);\r\n    var calibrationCmd = allcmd[2].split(\",\").splice(1);\r\n\r\n    encodeCalibrationInfo(calibrationCmd);\r\n    coloumsMode.value = filterModel(loadCmd[0].split(\"*\"));\r\n\r\n    loadCmd[2] =   Math.floor(loadCmd[2] * 10) / 10;\r\n    loadCmd[3] =   Math.floor(loadCmd[3] * 10) / 10;\r\n    loadCmdInfo.value = loadCmd;\r\n    allcmd.pop(); // 去除最后一位的空值\r\n    comAllCmdInfo.value = getComInfo(comCmd);\r\n    return;\r\n  }\r\n};\r\n\r\n\r\n// 向安卓发送指令\r\nconst androidStatus_fn = () => {\r\n  postAN.ANSend(\"$UARTSET\");\r\n  setTimeout(() => {\r\n    postAN.ANSend(\"$PREWEIGHT\");\r\n  }, 500);\r\n  setTimeout(() => {\r\n    postAN.ANSend(\"$WEGIHTCAL\");\r\n  }, 1000);\r\n};\r\nandroidStatus_fn();\r\n\r\nonMounted(() => {\r\n  window.callJSResult = callJSResult;\r\n  window.callJSResult_Status = callJSResult_Status;\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.cell-group {\r\n  margin-top: 10px;\r\n}\r\n.checkbox {\r\n  margin-top: 0px;\r\n  margin-bottom: 15px;\r\n}\r\n.trInfo {\r\n  width: 30vh;\r\n  text-align: center;\r\n  height: 30px;\r\n}\r\n</style>","import script from \"./LoadSettings.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoadSettings.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LoadSettings.vue?vue&type=style&index=0&id=58cf7cea&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\aEJ\\\\apache-tomcat-9.0.54\\\\webapps\\\\yunweibao_ad\\\\node_modules\\\\_vue-loader@17.0.0@vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-58cf7cea\"]])\n\nexport default __exports__","export { default } from \"-!../../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-41!../../../node_modules/_vue-loader@17.0.0@vue-loader/dist/index.js??ruleSet[0].use[0]!./LoadSettings.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-41!../../../node_modules/_vue-loader@17.0.0@vue-loader/dist/index.js??ruleSet[0].use[0]!./LoadSettings.vue?vue&type=script&setup=true&lang=js\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-12.use[0]!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-12.use[1]!../../../node_modules/_vue-loader@17.0.0@vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-12.use[2]!../../../node_modules/_vue-loader@17.0.0@vue-loader/dist/index.js??ruleSet[0].use[0]!./LoadSettings.vue?vue&type=style&index=0&id=58cf7cea&scoped=true&lang=css\"","// extracted by mini-css-extract-plugin\nexport {};"],"names":["ComConfig","AlarmPicker","Col","Row","Cell","Field","CellGroup","Button","Checkbox","Toast","Popup","keepDecimal","defineComponent","ref","onMounted","mixins","t","postAN","TabHeaders","StickyBottom","callJSResult_Status","showPicker","columns","defaultIndex","navTitle","resultAll","maxNum","comAllCmdInfo","cmdCmdInfo","loadCmdInfo","coloumsMode","addCalibrationInfo","status","isSend","name","showPickerFn","num","value","onConfirm","items","BottomSubmit","arr","str","forEach","item","value1","value2","ANsendSetting","comConfirm","comInfo","index","send","toString","console","log","send2","deleteCalibrationInfoFn","filter","check","splice","length","addCalibrationInfoFn","fail","push","getComInfo","comCmd","comArr","indexOf","its","split","it","getNewArray","array","subGroupLength","newArray","slice","encodeCalibrationInfo","calibrationCmd","res","filterModel","data","i","callJSResult","cmds","allcmd","loadCmd","Math","floor","pop","androidStatus_fn","ANSend","setTimeout","window"],"sourceRoot":""}